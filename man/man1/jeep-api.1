.\"
.\" Generated by predoc at 2025-11-11T15:57:33Z
.\"
.Dd November 12, 2025
.Dt JEEP-API 1
.Os Jeep DEVEL
.
.Sh NAME
.Nm jeep-api
.Nd generate an API document in a Janet bundle
.
.Sh SYNOPSIS
.Nm
.Oo
.Fl d
.Ar prefix No \&|
.Fl "-drop"
.Ar prefix
.Oc
.Oo
.Fl m
.Ar path No \&|
.Fl "-match"
.Ar path
.Oc
.Oo
.Fl M
.Ar path No \&|
.Fl "-no-match"
.Ar path
.Oc
.Oo
.Fl o
.Ar path No \&|
.Fl "-output"
.Ar path
.Oc
.Oo
.Fl p No \&|
.Fl "-private"
.Oc
.Oo
.Fl t
.Ar path No \&|
.Fl "-template"
.Ar path
.Oc
.Oo
.Fl u
.Ar url No \&|
.Fl "-url"
.Ar url
.Oc
.
.Sh DESCRIPTION
.Nm
generates an API document based on information in a bundle’s
.Sy info file .
The document is output as a Markdown-formatted text file that
will display nicely in online hosting repository websites (e.g.
GitHub).
.Pp
In order to generate a document,
the
.Sy info file
must describe the files in a particular way.
This is best seen with an example:
.Bd -literal -offset indent
{:name \(dqfoobar\(dq
 :artifacts {:libraries \(lB{:prefix \(dqfoobar\(dq
                          :paths \(lB\(dqa\&.janet\(dq
                                  \(dqb\&.janet\(dq\(rB}\(rB}}
.Ed
.Pp
As can be seen above,
the
.Sy info file
must include (1)
a struct/table with an
.Ql ":artifacts"
key that is mapped to (2)
a struct/table with a
.Ql ":libraries"
key that is mapped to (3)
an array/tuple with (4)
one or more struct/tables with a
.Ql ":paths"
key.
If this is not present,
Jeep will exit with an error.
.
.Ss Options
.Bl -tag -width Ds
.It Xo
.Fl d
.Ar prefix No \&|
.Fl "-drop"
.Ar prefix
.Xc
Drops the <prefix> from all module names.
.It Xo
.Fl m
.Ar path No \&|
.Fl "-match"
.Ar path
.Xc
Includes bindings from a file only if the file’s path matches
(or begins with)
.Ar path .
Bindings from other files are not put in the API document.
This option can be invoked multiple times.
More information on filtering bindings is set out in
.Sx "Filtering"
below.
.It Xo
.Fl M
.Ar path No \&|
.Fl "-no-match"
.Ar path
.Xc
Excludes bindings from a file if the file’s path matches (or
begins with)
.Ar path .
Bindings from other files are put in the API document.
This option can be invoked multiple times.
More information on filtering bindings is set out in
.Sx "Filtering"
below.
.It Xo
.Fl o
.Ar path No \&|
.Fl "-output"
.Ar path
.Xc
Writes the API document to
.Ar path .
If
.Ar path
is
.Ql "-" ,
the output is written to stdout.
.It Xo
.Fl p No \&|
.Fl "-private"
.Xc
Includes private bindings in the API document.
.It Xo
.Fl t
.Ar path No \&|
.Fl "-template"
.Ar path
.Xc
The
.Ar path
to a file containing the Mustache template used to produce the
API document.
Jeep uses the Musty bundle for rendering the template into text.
.It Xo
.Fl u
.Ar url No \&|
.Fl "-url"
.Ar url
.Xc
Prepends the
.Ar url
to all links.
By default,
Jeep produces links that are relative.
If desirable,
a user can specify a URL that is prepended to the beginning
of these relative links.
.El
.Pp
For more information about the
.Sy info file ,
see CONCEPTS in
.Xr jeep 1 .
.
.Ss Filtering
By default,
Jeep looks for bindings in the files and directories referred
to in the info file.
.Pp
A user can filter these files and directories in two ways:
.Bl -enum -offset 3n
.It
If the user makes invocations of
.Fl "-match"
at the command line,
only files that match the
.Ar path
(or begin with a matching path)
are included.
.Sy All other files are excluded.
.It
If the user makes invocations of
.Fl "-no-match"
at the command line,
files that match the
.Ar path
(or begin with a matching path)
are excluded.
.Sy All other files are included.
.El
.
.Sh EXAMPLES
To create an API document using the default settings (it will
be written to
.Eo
.Pa ./api.md
.Ec ) :
.Bd -literal -offset indent
$ jeep api
.Ed
.Pp
To create an API document that excludes all bindings from files
in
.Eo
.Pa ./deps
.Ec
and prepends a URL to all links:
.Bd -literal -offset indent
$ jeep api -M deps -u \(dqhttps://example\&.org/\(dq
.Ed
.Pp
To output the result to stdout:
.Bd -literal -offset indent
$ jeep api -o -
.Ed
.
.Sh AUTHORS
.An Michael Camilleri Aq Mt mike@inqk.net
.
.Sh BUGS
Report issues at
.Lk https://github.com/pyrmont/jeep
