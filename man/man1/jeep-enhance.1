.\"
.\" Generated by predoc at 2025-11-19T01:32:21Z
.\"
.Dd November 19, 2025
.Dt JEEP-ENHANCE 1
.Os Jeep DEVEL
.
.Sh NAME
.Nm jeep-enhance
.Nd enhance a legacy Janet bundle into a modern Janet bundle
.
.Sh SYNOPSIS
.Nm
.Oo
.Fl a
.Ar name No \&|
.Fl "-author"
.Ar name
.Oc
.Oo
.Fl d
.Ar text No \&|
.Fl "-desc"
.Ar text
.Oc
.Oo
.Fl i
.Ar type No \&|
.Fl "-license"
.Ar type
.Oc
.Oo
.Fl f
.Ar url No \&|
.Fl "-forge"
.Ar url
.Oc
.Oo
.Fl u
.Ar url No \&|
.Fl "-url"
.Ar url
.Oc
.Oo
.Fl r
.Ar url No \&|
.Fl "-repo"
.Ar url
.Oc
.Oo
.Fl e No \&|
.Fl "-executable"
.Oc
.Oo
.Fl l No \&|
.Fl "-library"
.Oc
.Oo
.Fl m No \&|
.Fl "-manpage"
.Oc
.Oo
.Fl n No \&|
.Fl "-native"
.Oc
.Oo
.Fl s No \&|
.Fl "-script"
.Oc
.Oo
.Fl k
.Ar type No \&|
.Fl "-alias"
.Ar type
.Oc
.Oo
.Fl K
.Ar type No \&|
.Fl "-no-alias"
.Ar type
.Oc
.Oo
.Fl b No \&|
.Fl "-bare"
.Oc
.Oo
.Fl A No \&|
.Fl "-no-ask"
.Oc
.Oo
.Fl t
.Ar dir No \&|
.Fl "-templates"
.Ar dir
.Oc
.Ar name
.
.Sh DESCRIPTION
.Nm
enhances a
.Sy legacy bundle
in the current directory into a
.Sy modern bundle .
This command is intended for projects that use the older
.Ql "project\&.janet"
format with
.Ql "declare-project"
and
.Ql "declare-source"
calls.
.Pp
At minimum,
the enhancement process:
.Pp
.Bl -enum -offset 3n -compact
.It
parses the existing
.Eo
.Pa ./project.janet
.Ec
file to extract metadata
.It
backs up the original
.Eo
.Pa ./project.janet
.Ec
to
.Eo
.Pa ./project.janet.original
.Ec
.It
creates an
.Sy info file
with the extracted metadata
.El
.Pp
It uses the same underlying logic as
.Xr jeep-new 1
and is intended to create a bundle that is equivalent to what
the user would get if they ran
.Xr jeep-new 1
with metadata equivalent to that of the legacy bundle.
.Pp
Note that,
with the exception of
.Eo
.Pa ./project.janet
.Ec ,
if a file exists with the same path as one
.Xr jeep-new 1
would create,
.Nm
does not create the file and leaves the existing file in place.
.
.Ss Options
.Bl -tag -width Ds
.It Xo
.Fl A No \&|
.Fl "-no-ask"
.Xc
Sets whether to prompt the user to provide information not specified
in certain options.
The information
.Nm
will ask about are values specified in the
.Fl "-author" ,
.Fl "-desc" ,
.Fl "-license" ,
.Fl "-repo"
and
.Fl "-url"
options.
.It Xo
.Fl K
.Ar type No \&|
.Fl "-no-alias"
.Ar type
.Xc
Sets whether to not use the aliased path for
.Ar type .
The valid values for
.Ar type
are
.Cm bundle
and
.Cm info .
By default,
the
.Sy info file
uses an alias (it is saved to
.Eo
.Pa ./info.jdn
.Ec )
and the
.Sy bundle script
does not (it is saved to
.Eo
.Pa ./bundle/init.janet
.Ec ) .
.It Xo
.Fl a
.Ar name No \&|
.Fl "-author"
.Ar name
.Xc
Sets the name of the author of the bundle.
If not provided,
.Nm
will try to find the information in the user’s Git configuration
file.
.It Xo
.Fl b No \&|
.Fl "-bare"
.Xc
Sets whether
.Nm
will create a bare bundle.
A bare bundle contains an
.Sy info file
but does not generate any other files or directories.
.It Xo
.Fl d
.Ar text No \&|
.Fl "-desc"
.Ar text
.Xc
Sets the description of the bundle.
.It Xo
.Fl e No \&|
.Fl "-executable"
.Xc
Sets whether the bundle produces a compiled executable artifact.
.It Xo
.Fl f
.Ar url No \&|
.Fl "-forge"
.Ar url
.Xc
Sets the forge where the bundle will be hosted.
This information is not saved in the
.Sy info file
but it enables
.Nm
to infer URLs to associate with the
.Ql ":url"
and
.Ql ":repo"
keys.
An example would be ‘github.com/octocat’.
.It Xo
.Fl i
.Ar type No \&|
.Fl "-license"
.Ar type
.Xc
Sets the license of the bundle.
.Nm
is able to generate license files for ‘Apache-2.0’,
‘BSD-3-Clause’,
‘CC0-1.0’,
‘GPL-3.0’,
‘ISC’ and ‘MIT’.
If a user uses one of those specific names,
the file ‘LICENSE’ will be generated.
.It Xo
.Fl k
.Ar type No \&|
.Fl "-alias"
.Ar type
.Xc
Sets whether to use the aliased path for
.Ar type .
The valid values for
.Ar type
are
.Cm bundle
and
.Cm info .
By default,
the
.Sy info file
uses an alias (it is saved to
.Eo
.Pa ./info.jdn
.Ec )
and the
.Sy bundle script
does not (it is saved to
.Eo
.Pa ./bundle/init.janet
.Ec ) .
.It Xo
.Fl l No \&|
.Fl "-library"
.Xc
Sets whether the bundle produces a pure Janet library artifact.
.It Xo
.Fl m No \&|
.Fl "-manpage"
.Xc
Sets whether the bundle produces a man page artifact.
.It Xo
.Fl n No \&|
.Fl "-native"
.Xc
Sets whether the bundle produces a native library artifact.
.It Xo
.Fl r
.Ar url No \&|
.Fl "-repo"
.Ar url
.Xc
Sets the repository URL of the bundle.
If
.Fl "-forge"
is provided,
the inferred URL will be of the form
.Ql "git+https://<forge>/<bundle>" .
Otherwise,
the placeholder
.Ql "https://example\&.org/<bundle>"
will be the inference.
.It Xo
.Fl s No \&|
.Fl "-script"
.Xc
Sets whether the bundle produces an executable script artifact.
.It Xo
.Fl t
.Ar dir No \&|
.Fl "-templates"
.Ar dir
.Xc
Sets a directory to look for templates.
See
.Sx "TEMPLATES"
below for more information.
.It Xo
.Fl u
.Ar url No \&|
.Fl "-url"
.Ar url
.Xc
Sets the URL of the bundle.
If
.Fl "-forge"
is provided,
the inferred URL will be of the form
.Ql "https://<forge>/<bundle>" .
Otherwise,
the placeholder
.Ql "https://example\&.org/<bundle>"
will be the inference.
.El
.Pp
For more information about the
.Sy info file
and
.Sy bundle script ,
see CONCEPTS in
.Xr jeep 1 .
.
.Sh TEMPLATES
.Nm
uses the same template files as
.Xr jeep-new 1
to populate the enhanced bundle:
.Pp
.Bl -bullet -offset 3n -compact
.It
\&.gitignore
.It
README.me
.It
binscript
.It
bundle.janet
.It
info.jdn
.It
project.janet
.El
.Pp
If an individual user finds that these templates are insufficient,
.Nm
can be directed to look in a different template directory using
the
.Fl "-templates"
option.
If the template directory does not contain a particular file,
.Nm
will fall back to using the provided template.
.Pp
Templates are processed through Musty,
a Janet implementation of the Mustache templating language.
The values extracted from the original
.Ql "project\&.janet"
are available under the same keys as the
.Sy info file
(e.g.
the name of the bundle can be replaced with
.Ql "{{{name}}}" ) .
For more information,
see
.Lk https://mustache.github.io .
.
.Sh EXAMPLES
To enhance the bundle in the current directory:
.Bd -literal -offset indent
$ jeep enhance
.Ed
.Pp
To enhance the bundle without being prompted for additional information:
.Bd -literal -offset indent
$ jeep enhance --no-ask
.Ed
.Pp
To enhance the bundle with custom templates:
.Bd -literal -offset indent
$ jeep enhance --templates my/templates/dir
.Ed
.
.Sh AUTHORS
.An Michael Camilleri Aq Mt mike@inqk.net
.
.Sh BUGS
Report issues at
.Lk https://github.com/pyrmont/jeep
