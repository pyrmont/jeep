.\"
.\" Generated by predoc at 2025-11-09T22:49:39Z
.\"
.Dd November 6, 2025
.Dt JEEP-DEP 1
.Os Jeep DEVEL
.
.Sh NAME
.Nm jeep-dep
.Nd add, update or remove dependency information in a Janet bundle
.
.Sh SYNOPSIS
.Nm
.Oo
.Fl a No \&|
.Fl "-autotag"
.Oc
.Oo
.Fl r No \&|
.Fl "-remove"
.Oc
.Oo
.Fl u No \&|
.Fl "-update"
.Oc
.Oo
.Fl v No \&|
.Fl "-vendor"
.Oc
.Ar deps
.No ...
.
.Sh DESCRIPTION
.Nm
adds,
updates or removes dependency information in a bundle’s
.Sy info file .
This command does not install dependencies;
that is the responsibility of
.Xr jeep-prep 1 .
.
.Ss Options
.Bl -tag -width Ds
.It Xo
.Fl a ,
.Fl "-autotag"
.Xc
Adds a
.Ql ":tag"
key to the dependency information that is added or updated with
the SHA of the current commit as the associated value.
.It Xo
.Fl r ,
.Fl "-remove"
.Xc
Removes the dependency information from the bundle’s
.Sy info file .
.It Xo
.Fl u ,
.Fl "-update"
.Xc
Updates the dependency information in the bundle’s
.Sy info file .
.It Xo
.Fl v ,
.Fl "-vendor"
.Xc
Changes the dependencies that will be vendored.
Vendoring is discussed below in
.Sx "Vendoring" .
.It Xo
.Ar deps
.No ...
.Xc
One or more dependencies to add or remove.
Dependencies can either be specified by a short name,
a URL or a JDN struct/table.
.El
.
.Ss Vendoring
A bundle’s
.Sy info file
can contain dependency information in an array/tuple mapped
to the
.Ql ":dependencies"
key.
By default,
dependencies that are added,
updated or removed using
.Nm
are added to,
updated in or removed from this data structure.
Dependencies that are listed in this data structure are installed
into the
.Sy syspath .
This will either be the global syspath or
.Eo
.Pa ./_system
.Ec ,
the local syspath,
if the user is using the
.Fl "-local"
flag as described in
.Xr jeep 1 .
.Pp
Janet does not support the installation of multiple versions
of a dependency.
To avoid version conflicts,
a user may prefer to vendor dependencies.
.Nm
supports this with the
.Fl "-vendor"
option.
Vendored dependencies are listed in an array/tuple under the
.Ql ":vendored"
keyword.
.Pp
A vendored dependency is similar to an ordinary dependency.
That is,
it can be a shortname (e.g.
“example”)
or a struct/table.
If it is a struct/table,
it must contain the
.Ql ":name"
and
.Ql ":url"
keys.
It can also include the
.Ql ":tag" ,
.Ql ":prefix" ,
and
.Ql ":files"
keys.
If the
.Ql ":files"
key is present,
a vendored dependency will be fetched from the specified URL
and the values used to copy files into the bundle.
If the values are strings,
the relative path of the source file matches the relative path
of the destination file.
However,
if the value is a two-element array/tuple,
the file located at the path in the first value will be copied
to the path in the second value.
See
.Sx "EXAMPLES"
below.
.Pp
For more information about the
.Sy info file ,
the
.Sy bundle script
and the
.Sy syspath ,
see CONCEPTS in
.Xr jeep 1 .
.
.Sh EXAMPLES
To add a dependency to the
.Sy info file :
.Bd -literal -offset indent
$ jeep dep https://example\&.org/foo\&.git
.Ed
.Pp
To update a dependency in the
.Sy info file
with the SHA of the current commit:
.Bd -literal -offset indent
$ jeep dep -a -u foo
.Ed
.Pp
To remove a dependency from the
.Sy info file :
.Bd -literal -offset indent
$ jeep dep -r foo
.Ed
.Pp
To add two dependencies that will be vendored:
.Bd -literal -offset indent
$ jeep dep --vendor https://example\&.org/foo\&.git https://example\&.org/bar\&.git
.Ed
.Pp
To add a vendored dependency that will selectively copy files:
.Bd -literal -offset indent
$ jeep dep --vendor \(aq{:name \(dqfoo\(dq \e
                      :url \(dqhttps://example\&.org/foo\(dq \e
                      :prefix \(dqdeps\(dq \e
                      :files \(lB\(lB\(dqa\&.janet\(dq \(dqb\&.janet\(dq\(rB \e
                              \(lB\(dqc\&.janet\(dq \(dqc/init\&.janet\(dq\(rB\(rB}\(aq
.Ed
.
.Sh AUTHORS
.An Michael Camilleri Aq Mt mike@inqk.net
.
.Sh BUGS
Report issues at
.Lk https://github.com/pyrmont/jeep
